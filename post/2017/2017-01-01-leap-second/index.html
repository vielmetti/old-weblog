<!DOCTYPE html>
<html lang="en-us">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  	<meta property="og:title" content=" Happy leap second (or mostly happy) and happy new year for 2017 &middot;  Vacuum weblog from Edward Vielmetti" />
  	<meta property="og:site_name" content="Vacuum weblog from Edward Vielmetti" />
  	<meta property="og:url" content="http://vielmetti.github.io/post/2017/2017-01-01-leap-second/" />

    
  	<meta property="og:type" content="article" />

    <meta property="og:article:published_time" content="2017-01-01T10:00:01-05:00" />

    
    <meta property="og:article:tag" content="ntp" />
    
    <meta property="og:article:tag" content="Cloudflare" />
    
    <meta property="og:article:tag" content="DNS" />
    
    <meta property="og:article:tag" content="systemd" />
    
    <meta property="og:article:tag" content="CoreOS" />
    
    

  <title>
     Happy leap second (or mostly happy) and happy new year for 2017 &middot;  Vacuum weblog from Edward Vielmetti
  </title>

    <meta name="description" content="Tracking the comings and goings of @vielmetti" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="http://vielmetti.github.io/images/favicon.ico">
	  <link rel="apple-touch-icon" href="http://vielmetti.github.io/images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="http://vielmetti.github.io/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="http://vielmetti.github.io/css/nav.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400|Inconsolata" />


    
      
          <link href="http://vielmetti.github.io/index.xml" rel="alternate" type="application/rss+xml" title="Vacuum weblog from Edward Vielmetti" />
      
      
    
    <meta name="generator" content="Hugo 0.17" />

    <link rel="canonical" href="http://vielmetti.github.io/post/2017/2017-01-01-leap-second/" />

    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-83143-8', 'auto');
      ga('send', 'pageview');

    </script>
    

    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
        
            
            <li class="nav-opened" role="presentation">
            	<a href="http://vielmetti.github.io/post/about-this-weblog/">About this weblog</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="http://vielmetti.github.io/post/2011/2011-11-20-moon-maps-lroc/">New map of the dark side of the moon from the Lunar Reconnaissance Orbiter Camera (LROC)</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="http://vielmetti.github.io/post/2011/2011-06-09-power-outage-maps/">Power outage maps for all 50 states plus as many other countries as I can find</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="http://vielmetti.github.io/post/2015/2015-11-01-slack-vs-irc/">Slack vs IRC</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="http://vielmetti.github.io/post/2014/2014-04-04-tune-in-to-skywarn-nets-in-50-states-when-severe-weather-threatens/">Tune in to Skywarn nets in 50 states when severe weather threatens</a>
            </li>
        
    </ul>
    
    
    <a class="subscribe-button icon-feed" href="http://vielmetti.github.io/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">




<header class="main-header post-head no-cover">
  <nav class="main-nav clearfix">


  
  
      <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
  
  </nav>
</header>



<main class="content" role="main">




  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">Happy leap second (or mostly happy) and happy new year for 2017</h1>
        <small></small>

        <section class="post-meta">
        
          <time class="post-date" datetime="2017-01-01T10:00:01-05:00">
            Jan 1, 2017
          </time>
        
         
          <span class="post-tag small"><a href="http://vielmetti.github.io/tags/ntp/">#ntp</a></span>
         
          <span class="post-tag small"><a href="http://vielmetti.github.io/tags/cloudflare/">#Cloudflare</a></span>
         
          <span class="post-tag small"><a href="http://vielmetti.github.io/tags/dns/">#DNS</a></span>
         
          <span class="post-tag small"><a href="http://vielmetti.github.io/tags/systemd/">#systemd</a></span>
         
          <span class="post-tag small"><a href="http://vielmetti.github.io/tags/coreos/">#CoreOS</a></span>
         
        </section>
    </header>

    <section class="post-content">
      

<p>Happy new year, and from a technology perspective, also happy leap second.</p>

<p>[image: timekeeping for the leap second, from FSM Labs]
<blockquote class="twitter-tweet" data-partner="tweetdeck"><p lang="en" dir="ltr">Here&#39;s a complete picture of <a href="https://twitter.com/hashtag/leapsecond?src=hash">#leapsecond</a> 2016. <a href="https://t.co/DFp6XgnPig">pic.twitter.com/DFp6XgnPig</a></p>&mdash; FSMLabs (@FSMLabs) <a href="https://twitter.com/FSMLabs/status/815589123121618944">January 1, 2017</a></blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<p>As always, when there&rsquo;s a leap second, people get a chance to debug their
timekeeping code. I guess if they happen frequently enough the code will
get better exercise and some bugs will be shaken out. Generally every time
some government messes with timekeeping, a small army of programmer gets
a few hours of work to adjust with some occasional unplanned downtime.</p>

<p><a href="http://www.fsmlabs.com">FSMLabs</a> watched the time change closely, and their image above
shows one peculiarity of reported time: Google&rsquo;s NTP servers
returned a time that was up to half a second off, slowly creeping
out of sync with real time and then back into sync. They write
in a recap, <a href="http://www.fsmlabs.com/news/2017/01/01/2leapsecondskew2016.html">Leapsecond 2016 complete</a></p>

<blockquote>
<p>You can see that Google starts its 20 hour leap-second “skew” 10 hours before the event and then skews back to the real time. Everyone else stays correct and then has a short error as they “leap” the second and then come back into correct time.</p>
</blockquote>

<p>FSMLabs sells precision timekeeping equipment aimed at the financial
industry.</p>

<h3 id="leap-second-bugs">Leap second bugs</h3>

<p>The biggest issue identified was at Cloudflare, a distributed system
for web cachine.
<a href="https://www.cloudflarestatus.com/incidents/1fczgjmknplp">Some DNS lookups causing 5xx errors due to leap second bug</a>
is the incident report.</p>

<blockquote>
<p>Starting at 00:00 UTC on January 1, 2017, CNAME resolutions on some machines stopped working due to a bug triggered by the universal addition of one leap second, which affected both some authoritative DNS and origin DNS lookups, causing 5xx errors.</p>
</blockquote>

<p>In the real world, the biggest reported issue that could be
suspicious was reported by the BBC as <a href="http://www.bbc.com/news/uk-38482746">London ambulance service hit by new year fault</a>,
an account of computer system crashes at London Ambulance Service (LAS)
that are peculiarly synchronized with the appearance of the leap second.</p>

<blockquote>
<p>It is understood the computer system crashed, so calls had to be recorded by pen and paper for nearly five hours on one of the busiest nights of the year.</p>
</blockquote>

<h3 id="systemd-is-eating-the-world">Systemd is eating the world</h3>

<p>Finally in timekeeping news and notes, the <a href="https://coreos.com/os/docs/latest/configuring-date-and-timezone.html">CoreOS help pages for timekeeping</a>
illustrate the importance of keeping good time within a computing cluster.</p>

<blockquote>
<p>CoreOS clusters use NTP to synchronize the clocks of member nodes, and all machines start an NTP client at boot. CoreOS versions later than 681.0.0 use systemd-timesyncd(8) as the default NTP client. Earlier versions used ntpd(8). Use systemctl to check which service is running:</p>
</blockquote>

<p>&ldquo;Systemd is eating the world&rdquo;, and one of the things it has eaten is timekeeping.
One of the old CoreOS bugs, <a href="https://github.com/coreos/bugs/issues/391">systemd-timesyncd not as precise as ntpd</a>,
reports that because of systemd-timesyncd&rsquo;s less precise timekeeping there
are problems with Deis and Ceph. The bug report is from 2015 and was closed
due to inactivity, but if you have weird problems with CoreOS, Deis, and Ceph,
check your clocks!</p>

<h3 id="notes-and-references">Notes and references</h3>

<p>The future timekeeping bug that&rsquo;s most likely to create worldwide
angst on the scale of Y2K is the
<a href="https://en.wikipedia.org/wiki/Year_2038_problem">Year 2038 problem</a>,
which I&rsquo;m counting on helping fix to fund my retirement.</p>

<p>TimeAndDate News has a <a href="https://www.timeanddate.com/news/time/">time zone news</a> feed,
which is useful to track worldwide adjustments to and from Daylight Savings Time.</p>

<p>Hail truechimers, exit falsetickers!</p>

<h4 id="updated-2017-01-01t16-07-00-to-add-fsm-labs-london-ambulance-notes-headers">Updated 2017-01-01T16:07:00 to add FSM Labs, London Ambulance notes, headers</h4>

    </section>


  <footer class="post-footer">


    

    





<section class="author">
  <h4><a href="http://vielmetti.github.io/">Edward Vielmetti</a></h4>
  
  <p>Read <a href="http://vielmetti.github.io/">more posts</a> by this author.</p>
  
  <div class="author-meta">
    <span class="author-location icon-location">Ann Arbor, Michigan</span>
    
  </div>
</section>



    
<section class="share">
  <h4>Share this post</h4>
  <a class="icon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=Happy%20leap%20second%20%28or%20mostly%20happy%29%20and%20happy%20new%20year%20for%202017&nbsp;-&nbsp;Vacuum%20weblog%20from%20Edward%20Vielmetti&amp;url=http%3a%2f%2fvielmetti.github.io%2fpost%2f2017%2f2017-01-01-leap-second%2f"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="hidden">Twitter</span>
  </a>
  <a class="icon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fvielmetti.github.io%2fpost%2f2017%2f2017-01-01-leap-second%2f"
      onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="hidden">Facebook</span>
  </a>
  <a class="icon-pinterest" style="font-size: 1.4em" href="http://pinterest.com/pin/create/button/?url=http%3a%2f%2fvielmetti.github.io%2fpost%2f2017%2f2017-01-01-leap-second%2f&amp;description=Happy%20leap%20second%20%28or%20mostly%20happy%29%20and%20happy%20new%20year%20for%202017"
      onclick="window.open(this.href, 'pinterest-share','width=580,height=296');return false;">
      <span class="hidden">Pinterest</span>
  </a>
  <a class="icon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=http%3a%2f%2fvielmetti.github.io%2fpost%2f2017%2f2017-01-01-leap-second%2f"
     onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
      <span class="hidden">Google+</span>
  </a>
</section>



    




  </footer>
</article>

</main>
    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">Vacuum weblog from Edward Vielmetti</a> </section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="http://vielmetti.github.io/js/jquery.js"></script>
    <script type="text/javascript" src="http://vielmetti.github.io/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="http://vielmetti.github.io/js/index.js"></script>
    
</body>
</html>

