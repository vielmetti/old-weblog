<!DOCTYPE html>
<html lang="en-us">
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  	<meta property="og:title" content=" First pass at MongoDB &middot;  Vacuum weblog from Edward Vielmetti" />
  	<meta property="og:site_name" content="Vacuum weblog from Edward Vielmetti" />
  	<meta property="og:url" content="http://vielmetti.github.io/post/2015/2015-08-26-first-pass-at-mongodb/" />
    
    
  	<meta property="og:type" content="article" />

    <meta property="og:article:published_time" content="2015-08-26T00:40:00-04:00" />

    
    

  <title>
     First pass at MongoDB &middot;  Vacuum weblog from Edward Vielmetti
  </title>

    <meta name="description" content="Tracking the comings and goings of @vielmetti" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="http://vielmetti.github.io/images/favicon.ico">
	  <link rel="apple-touch-icon" href="http://vielmetti.github.io/images/apple-touch-icon.png" />
    
    <link rel="stylesheet" type="text/css" href="http://vielmetti.github.io/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400|Inconsolata" />


    
      
          <link href="http://vielmetti.github.io/index.xml" rel="alternate" type="application/rss+xml" title="Vacuum weblog from Edward Vielmetti" />
      
      
    
    <meta name="generator" content="Hugo 0.15" />

    <link rel="canonical" href="http://vielmetti.github.io/post/2015/2015-08-26-first-pass-at-mongodb/" />

    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
            
            <li class="nav-opened" role="presentation">
            	<a href="http://vielmetti.github.io/post/2016/2016-05-23-day-trips-from-ann-arbor/">Day trips from Ann Arbor</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="http://vielmetti.github.io/post/2011/2011-06-09-power-outage-maps/">Power outage maps for all 50 states plus as many other countries as I can find</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="http://vielmetti.github.io/post/2015/2015-07-14-publishing-from-hugo-to-github-pages/">Publishing from Hugo to Github Pages</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="http://vielmetti.github.io/post/2015/2015-11-01-slack-vs-irc/">Slack vs IRC</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="http://vielmetti.github.io/post/2014/2014-04-04-tune-in-to-skywarn-nets-in-50-states-when-severe-weather-threatens/">Tune in to Skywarn nets in 50 states when severe weather threatens</a>
            </li>
        
    </ul>
    
    
    <a class="subscribe-button icon-feed" href="http://vielmetti.github.io/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">



<header class="main-header post-head no-cover">
  <nav class="main-nav clearfix">


  
  
      <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
  
  </nav>
</header>



<main class="content" role="main">




  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">First pass at MongoDB</h1>
        <section class="post-meta">
        
          <time class="post-date" datetime="2015-08-26T00:40:00-04:00">
            Aug 26, 2015
          </time>
        
         
        </section>
    </header>
  
    <section class="post-content">
      <p>Somehow I never learned SQL along the way. At various times I have
learned enough of the database lingo (inner join, outer join etc) to
know where I missing things, and I have a lot of experience with common
Unix tools (grep, sed, awk) and some newfangled tools (jq, csvkit) to
be able to turn a big pile of data into a smaller pile of data. But
I don&rsquo;t have database chops per se right now, and sometimes that&rsquo;s a
limiting factor on projects when the data sets are too big.</p>

<p>JSON formatted data seems to have won the data serialization wars, so
that at least transforms the problem on input; with jq (now in release 1.5)
you can take a stream of JSON formatted data that&rsquo;s almost what you want
and mangle it until it&rsquo;s really what you want. Lots of web APIs spit out
some flavor of JSON, and even if it&rsquo;s not precisely formatted to be ready
for input into something else, at least there&rsquo;s a straightforward way to
munge it into something better.</p>

<p>That leaves the task of dumping these JSON blobs into a database, in
such a way that you can relatively easily get something back out of the
database that answers what you are really trying to answer again. Here
the world splits into two pieces: the SQL databases that have been taught
how to deal with JSON (specifically PostgreSQL, as of version 9.3), and the
so-called NoSQL databases (specifically MongoDB).</p>

<p>Even Mongo knows that <a href="http://blog.mongodb.org/post/62899600960/scaling-advice-from-mongohq">scaling MongoDB is hard</a>, though
they frame it as the first 100 gigabytes of data stored in the system is
easy. Fortunately, the first set of tasks I have to throw at this particular
problem space are relatively small, databases measured in the 10s of megabytes.
Pretty much anything will work - even grep - on this size data. The
challenge becomes more of a how fast can you get something real running
that has relatively simple queries, relatively performant results, and
that can run on inexpensive hardware.</p>

<p>So I learned just enough Mongo to handle one tiny task: connect to an API,
download some data periodically, clean it up enough so that it&rsquo;s regular,
and store it away; and then construct queries that are conceptually simple
but that answer real questions. From there, do the ad hoc queries that prove
to yourself that you have the right data, and then bootstrap some web
app on top of all that to show off what you&rsquo;ve done.</p>

<p>The results here accomplish a relatively complex task with a handful of
lines of code. An API from a local agency is queried that has real time data.
That data gets cleaned up and standardized and then inserted into a Mongo
database. It&rsquo;s all of 6 lines of code.</p>

<script src="https://gist.github.com/vielmetti/85d5fba07b98e552c912.js"></script>

    </section>


  <footer class="post-footer">


    

    





<section class="author">
  <h4><a href="http://vielmetti.github.io/"></a></h4>
  
  <p>Read <a href="http://vielmetti.github.io/">more posts</a> by this author.</p>
  
  <div class="author-meta">
    
    
  </div>
</section>



    
    <section class="share">
      <h4>Share this post</h4>
      <a class="icon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=First%20pass%20at%20MongoDB&amp;url=http%3a%2f%2fvielmetti.github.io%2fpost%2f2015%2f2015-08-26-first-pass-at-mongodb%2f"
          onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
          <span class="hidden">Twitter</span>
      </a>
      <a class="icon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fvielmetti.github.io%2fpost%2f2015%2f2015-08-26-first-pass-at-mongodb%2f"
          onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
          <span class="hidden">Facebook</span>
      </a>
      <a class="icon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=http%3a%2f%2fvielmetti.github.io%2fpost%2f2015%2f2015-08-26-first-pass-at-mongodb%2f"
         onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
          <span class="hidden">Google+</span>
      </a>
    </section>
    

    
    
    

  </footer>
</article>

</main>
    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">Vacuum weblog from Edward Vielmetti</a> </section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="http://vielmetti.github.io/js/jquery.js"></script>
    <script type="text/javascript" src="http://vielmetti.github.io/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="http://vielmetti.github.io/js/index.js"></script>

</body>
</html>

