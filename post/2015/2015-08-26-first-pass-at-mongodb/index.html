<!DOCTYPE html> 
<html>
<body>
<title>Vacuum</title>


<h2>Vacuum weblog E. Vielmetti</h2>


<h3>
<a href="http://vielmetti.github.io/books/">books</a>
<a href="http://vielmetti.github.io/code/">code</a>
<a href="http://vielmetti.github.io/recipes/">recipes</a>
<a href="http://vielmetti.github.io/people/">people</a>
<a href="http://vielmetti.github.io/cities/">cities</a>
<a href="http://vielmetti.github.io/maps/">maps</a>
<a href="http://vielmetti.github.io/annarbor/">Ann Arbor</a>
<a href="http://vielmetti.github.io/categories/">categories</a>
<a href="http://vielmetti.github.io/keyphrases/">keyphrases</a>
</h3>




<h5>nature abhors a vacuum</h5>


<table>
<tr>
	

<td width="5%"></td>


<td width="30%" valign="top">
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>Vacuum weblog from Edward Vielmetti</h1>
      <p class="lead">
       Tracking the comings and goings of @vielmetti 
      </p>
    </div>

    <h3><a href="http://vielmetti.github.io/">Home</a> </h3>
    <ul class="sidebar-nav">
      
        <li><a href="http://vielmetti.github.io/post/2015/2015-07-14-publishing-from-hugo-to-github-pages"> Publishing from Hugo to Github Pages </a></li>
      
    </ul>

    <h3 class="panel-title">Recent Posts</h3> 
    <ul class="sidebar-recent">
	 
	<li><a href="http://vielmetti.github.io/post/2015/2015-08-26-first-pass-at-mongodb" class="list-group-item">First pass at MongoDB</a></li>
         
	<li><a href="http://vielmetti.github.io/post/2015/2015-08-24-radio-havana-cuba" class="list-group-item">Listening to Radio Havana Cuba via a shortwave software defined radio</a></li>
         
	<li><a href="http://vielmetti.github.io/post/2015/2015-08-24-summer-dinner" class="list-group-item">Summer dinner</a></li>
         
	<li><a href="http://vielmetti.github.io/post/2015/2015-08-23-gqrx-scanner" class="list-group-item">GQRX based radio scanner with gqrx-scan</a></li>
         
	<li><a href="http://vielmetti.github.io/post/2015/2015-08-22-github-waffle-kanban-board" class="list-group-item">Using Github Issues and Waffle.io as a personal kanban board</a></li>
         
	<li><a href="http://vielmetti.github.io/post/2015/2015-08-22-august-farmers-market-report" class="list-group-item">August 2015 Farmers Market report</a></li>
         
	<li><a href="http://vielmetti.github.io/post/2015/2015-08-22-ashley-madison-ann-arbor" class="list-group-item">Ashley and Madison, Ann Arbor</a></li>
         
	<li><a href="http://vielmetti.github.io/post/2015/2015-08-19-liquid-contact-indicator-tripped" class="list-group-item">Liquid contact indicator tripped</a></li>
         
	<li><a href="http://vielmetti.github.io/post/2015/2015-08-15-a2council-preview" class="list-group-item">Ann Arbor City Council Preview for 17 August 2015</a></li>
         
	<li><a href="http://vielmetti.github.io/post/2015/2015-08-14-tianjin-explosion" class="list-group-item">Tianjin explosion</a></li>
         
	<li><a href="http://vielmetti.github.io/post/2015/2015-08-13-zenos-inbox" class="list-group-item">Zeno&#39;s inbox</a></li>
         
	<li><a href="http://vielmetti.github.io/post/2015/2015-08-13-a2b3-lunch-nonsummary-broken-egg" class="list-group-item">a2b3 lunch non-summary for the Broken Egg</a></li>
         
	<li><a href="http://vielmetti.github.io/post/2015/2015-08-09-long-form" class="list-group-item">long form</a></li>
         
	<li><a href="http://vielmetti.github.io/post/2015/2015-08-07-all-watched-over-by-machines" class="list-group-item">All watched over by machines</a></li>
         
	<li><a href="http://vielmetti.github.io/post/2015/2015-08-06-a2b3-mi-compadre-non-summary" class="list-group-item">a2b3 lunch non-summary for August 6, 2015 at Mi Compadre</a></li>
         
	<li><a href="http://vielmetti.github.io/post/2015/2015-08-05-wakatime" class="list-group-item">wakatime, an automatic time tracker for programmers</a></li>
         
	<li><a href="http://vielmetti.github.io/post/2015/2015-08-04-robo-assistant-xdotai" class="list-group-item">Your new robo-assistant, Amy Ingram</a></li>
         
	<li><a href="http://vielmetti.github.io/post/2015/2015-08-04-i-voted" class="list-group-item">I voted, summer 2015 edition</a></li>
         
	<li><a href="http://vielmetti.github.io/post/2015/2015-08-03-expertise" class="list-group-item">expertise encapsulated into out of date memory banks</a></li>
         
	<li><a href="http://vielmetti.github.io/post/2015/2015-08-03-michigan-emergency-incidents" class="list-group-item">Michigan Emergency Incidents and overnight storm report</a></li>
        
    </ul>

    <div class="sidebar-calendar">
	
    </div>

    <div class="sidebar-todo">
	
    </div>

    <div class="sidebar-blogroll">
	
    </div>

    <p>&copy; 2015. All rights reserved. </p>
  </div>
</div>

</td>


<td width="5%" valign="top"></td>


<td width="55%" valign="top" halign="right">
		<title>First pass at MongoDB</title> 
	</head> 
	<body> 
		<h3>26 August 2015</h3>
		<h1>First pass at MongoDB</h1> 
		<p>Somehow I never learned SQL along the way. At various times I have
learned enough of the database lingo (inner join, outer join etc) to
know where I missing things, and I have a lot of experience with common
Unix tools (grep, sed, awk) and some newfangled tools (jq, csvkit) to
be able to turn a big pile of data into a smaller pile of data. But
I don&rsquo;t have database chops per se right now, and sometimes that&rsquo;s a
limiting factor on projects when the data sets are too big.</p>

<p>JSON formatted data seems to have won the data serialization wars, so
that at least transforms the problem on input; with jq (now in release 1.5)
you can take a stream of JSON formatted data that&rsquo;s almost what you want
and mangle it until it&rsquo;s really what you want. Lots of web APIs spit out
some flavor of JSON, and even if it&rsquo;s not precisely formatted to be ready
for input into something else, at least there&rsquo;s a straightforward way to
munge it into something better.</p>

<p>That leaves the task of dumping these JSON blobs into a database, in
such a way that you can relatively easily get something back out of the
database that answers what you are really trying to answer again. Here
the world splits into two pieces: the SQL databases that have been taught
how to deal with JSON (specifically PostgreSQL, as of version 9.3), and the
so-called NoSQL databases (specifically MongoDB).</p>

<p>Even Mongo knows that <a href="http://blog.mongodb.org/post/62899600960/scaling-advice-from-mongohq">scaling MongoDB is hard</a>, though
they frame it as the first 100 gigabytes of data stored in the system is
easy. Fortunately, the first set of tasks I have to throw at this particular
problem space are relatively small, databases measured in the 10s of megabytes.
Pretty much anything will work - even grep - on this size data. The
challenge becomes more of a how fast can you get something real running
that has relatively simple queries, relatively performant results, and
that can run on inexpensive hardware.</p>

<p>So I learned just enough Mongo to handle one tiny task: connect to an API,
download some data periodically, clean it up enough so that it&rsquo;s regular,
and store it away; and then construct queries that are conceptually simple
but that answer real questions. From there, do the ad hoc queries that prove
to yourself that you have the right data, and then bootstrap some web
app on top of all that to show off what you&rsquo;ve done.</p>

<p>The results here accomplish a relatively complex task with a handful of
lines of code. An API from a local agency is queried that has real time data.
That data gets cleaned up and standardized and then inserted into a Mongo
database. It&rsquo;s all of 6 lines of code.</p>

<script src="https://gist.github.com/vielmetti/85d5fba07b98e552c912.js"></script>
 
	</body> 
</td>


<td width="5%" valign="top"></td>

</tr>
</table>


<h3>Notes afterwards</h3>
	<p>
	Recreating more or less my original layout, but with 
	dynamically loaded content. I guess that could work!
	</p>

</body>
</html> 
